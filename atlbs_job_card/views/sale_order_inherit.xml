<odoo>

    <record id="view_order_form_inherit_department" model="ir.ui.view">
        <field name="name">sale.order.line.form.department</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">


            <xpath expr="//header" position="inside">
                <button name="action_create_job_card"
                        string="Create Job Card"
                        type="object"
                        class="btn-primary"
                        invisible="state  !='sale' or job_card_id != False"
               />
            </xpath>


            <xpath expr="//field[@name='order_line']" position="before">
                <button name="action_add_vehicle_products"
                        string="Add Vehicle Products"
                        type="object"
                        class="btn-primary"/>
            </xpath>

<!--dept added-->
            <xpath expr="//field[@name='order_line']/list/field[@name='product_id']" position="before">
                <field name="department"/>
                <!--                <field name="product_template_id_next"/>-->
            </xpath>


            <xpath expr="//field[@name='order_line']/list/field[@name='product_template_id']" position="after">
                <field name="description"/>
            </xpath>


            <xpath expr="//field[@name='order_line']/list/field[@name='product_uom_qty']" position="after">
                <field name="stock_qty"/>
            </xpath>


        </field>
    </record>






    <!-- Action for Vehicles -->
    <record id="action_sale_vehicle_products" model="ir.actions.act_window">
        <field name="name">Vehicles</field>
        <field name="res_model">product.template</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('categ_id.name','=','Vehicles')]</field>
         <field name="search_view_id" ref="view_vehicle_products_search"/>
    </record>





    <!--    <record id="action_vehicle_products_sale" model="ir.actions.act_window">-->
<!--        <field name="name">Vehicles (Sale)</field>-->
<!--        <field name="res_model">product.template</field>-->
<!--        <field name="view_mode">kanban,list,form</field>-->
<!--        <field name="domain">[('categ_id.name','=','Vehicles')]</field>-->
<!--        <field name="search_view_id" ref="view_vehicle_products_search"/>-->
<!--    </record>-->


    <!-- Custom Search View -->
    <record id="view_vehicle_products_search" model="ir.ui.view">
        <field name="name">product.template.vehicle.search</field>
        <field name="model">product.template</field>
        <field name="arch" type="xml">
            <search string="Search Vehicles">
                <field name="name"/>
                <field name="vehicle_make_id"/>
                <field name="model_id"/>
                <field name="colour_type"/>

                <!-- Group By Options -->
                <group expand="0" string="Group By">
                    <filter string="Make" name="group_make"
                            context="{'group_by':'vehicle_make_id'}"/>
                    <filter string="Model" name="group_model"
                            context="{'group_by':'model_id'}"/>
                    <filter string="Colour" name="group_colour"
                            context="{'group_by':'colour_type'}"/>
                </group>
            </search>
        </field>
    </record>


    <menuitem id="menu_sale_vehicle_products" name="Vehicles" parent="sale.sale_menu_root" sequence="100"/>

    <menuitem id="submenu_sale_all_vehicles" name="All Vehicles" parent="menu_sale_vehicle_products"
              action="action_sale_vehicle_products" sequence="1"/>







</odoo>